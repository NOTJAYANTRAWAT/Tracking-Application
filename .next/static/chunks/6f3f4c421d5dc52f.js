(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40801,t=>{"use strict";var e=t.i(43476),a=t.i(71645);function s(){let s=(0,a.useRef)(null),i=(0,a.useRef)(null),n=(0,a.useRef)(null),[l,r]=(0,a.useState)([]),[o,c]=(0,a.useState)(null);async function d(t){c(t),n.current.setLatLngs([]);let e=await fetch(`/api/location?device_id=${t}`),a=await e.json(),l=a.map(t=>[t.latitude,t.longitude]);for(let t of(s.current.fitBounds(l),a)){let e=[t.latitude,t.longitude];i.current.setLatLng(e),n.current.addLatLng(e),await new Promise(t=>setTimeout(t,120))}c(null)}return(0,a.useEffect)(()=>{let e;async function a(){let t=await fetch("/api/location"),e=await t.json(),a=[];for(let t of e){let e=await fetch(`/api/location?device_id=${t}`),s=await e.json();if(!s.length)continue;let i=s[0],n=s[s.length-1],l=new Date(i.timestamp),r=new Date(n.timestamp),o=l.toLocaleDateString(),c=l.toLocaleTimeString(),d=r.toLocaleTimeString(),m=Math.floor((r.getTime()-l.getTime())/1e3),u=m>60?`${Math.floor(m/60)}m ${m%60}s`:`${m}s`,h=function(t){let e=0;for(let a=1;a<t.length;a++)e+=function(t,e,a,s){let i=Math.sin((a-t)*Math.PI/180/2)**2+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin((s-e)*Math.PI/180/2)**2;return 12742*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}(t[a-1].latitude,t[a-1].longitude,t[a].latitude,t[a].longitude);return e}(s);a.push({id:t,duration:u,start:{lat:i.latitude,lng:i.longitude},end:{lat:n.latitude,lng:n.longitude},distance:`${h.toFixed(2)} km`,startTime:c,endTime:d,date:o})}r(a)}return async function(){e=await t.A(71400),delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),s.current=e.map("map",{zoomControl:!1}).setView([28.6139,77.209],13),e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(s.current),i.current=e.marker([28.6139,77.209]).addTo(s.current),n.current=e.polyline([],{color:"#00ff00",weight:3}).addTo(s.current),a()}(),()=>{s.current&&s.current.remove()}},[]),(0,e.jsxs)("div",{className:"flex h-screen bg-black text-green-400 font-mono",children:[(0,e.jsxs)("div",{className:"w-96 p-6 overflow-y-auto border-r border-green-500/20",children:[(0,e.jsx)("h2",{className:"text-2xl mb-6 tracking-widest",children:"✈ FLIGHT LOG"}),l.map(t=>(0,e.jsxs)("div",{className:"mb-6 p-4 border border-green-500/30   bg-green-500/5   hover:bg-green-500/10   transition",children:[(0,e.jsx)("div",{className:"text-xs opacity-70 mb-2",children:t.id}),(0,e.jsxs)("div",{className:"text-sm opacity-70",children:["DATE: ",t.date]}),(0,e.jsxs)("div",{className:"text-sm opacity-70",children:["TIME: ",t.startTime," → ",t.endTime]}),(0,e.jsxs)("div",{className:"text-sm",children:["DURATION: ",t.duration]}),(0,e.jsxs)("div",{className:"text-sm",children:["DISTANCE: ",t.distance]}),(0,e.jsxs)("div",{className:"text-sm",children:["START: ",t.start.lat.toFixed(3),", ",t.start.lng.toFixed(3)]}),(0,e.jsxs)("div",{className:"text-sm",children:["END: ",t.end.lat.toFixed(3),", ",t.end.lng.toFixed(3)]}),(0,e.jsxs)("div",{className:"text-sm",children:["DURATION: ",t.duration]}),(0,e.jsxs)("div",{className:"text-sm",children:["DISTANCE: ",t.distance]}),(0,e.jsxs)("div",{className:"text-sm",children:["START: ",t.start.lat.toFixed(3),", ",t.start.lng.toFixed(3)]}),(0,e.jsxs)("div",{className:"text-sm",children:["END: ",t.end.lat.toFixed(3),", ",t.end.lng.toFixed(3)]}),(0,e.jsx)("button",{onClick:()=>d(t.id),className:"mt-4 w-full border border-green-400   hover:bg-green-500 hover:text-black   py-2 transition",children:"▶ REPLAY"}),o===t.id&&(0,e.jsx)("div",{className:"mt-2 text-xs animate-pulse",children:"REPLAYING..."})]},t.id))]}),(0,e.jsx)("div",{id:"map",className:"flex-1"})]})}t.s(["default",()=>s])},71400,t=>{t.v(e=>Promise.all(["static/chunks/9c09817456a99b20.js"].map(e=>t.l(e))).then(()=>e(32322)))}]);