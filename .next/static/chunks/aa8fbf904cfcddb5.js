(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var t=e.i(43476),n=e.i(71645);function r(){let r=(0,n.useRef)(null),a=(0,n.useRef)(null),o=(0,n.useRef)(null),i=(0,n.useRef)(null),l=(0,n.useRef)(null),c=(0,n.useRef)(null),[s,u]=(0,n.useState)("idle");function d(){null!==i.current&&(navigator.geolocation.clearWatch(i.current),i.current=null),l.current&&(clearInterval(l.current),l.current=null),c.current=null,u("idle")}return(0,n.useEffect)(()=>{let t;return async function(){t=await e.A(71400),delete t.Icon.Default.prototype._getIconUrl,t.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),r.current=t.map("map").setView([28.6139,77.209],13),t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(r.current),a.current=t.marker([28.6139,77.209]).addTo(r.current),o.current=t.polyline([],{color:"#00ff00",weight:3}).addTo(r.current),setTimeout(()=>{r.current.invalidateSize()},100)}(),()=>d()},[]),(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-black text-green-400 font-mono",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-green-500/30 bg-green-500/5",children:[(0,t.jsx)("div",{className:"text-xl tracking-widest",children:"ðŸš FLIGHT CONTROL CONSOLE"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:function(){d();let e="LIVE-"+Date.now();c.current=e,o.current.setLatLngs([]),u("recording"),navigator.geolocation&&(i.current=navigator.geolocation.watchPosition(async t=>{let n=t.coords.latitude,i=t.coords.longitude;a.current.setLatLng([n,i]),o.current.addLatLng([n,i]),r.current.panTo([n,i]),await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e,latitude:n,longitude:i,timestamp:new Date().toISOString(),mode:"live"})})},console.error,{enableHighAccuracy:!0}))},className:"border border-green-400 px-4 py-2 hover:bg-green-500 hover:text-black transition",children:"START RECORDING"}),(0,t.jsx)("button",{onClick:function(){d();let e="SIM-"+Date.now();c.current=e,o.current.setLatLngs([]),u("simulation"),navigator.geolocation.getCurrentPosition(t=>{let n=t.coords.latitude,i=t.coords.longitude,c=2*Math.random()*Math.PI;l.current=setInterval(async()=>{c+=(Math.random()-.5)*.1;let t=5e-5+5e-5*Math.random();n+=t*Math.cos(c),i+=t*Math.sin(c),a.current.setLatLng([n,i]),o.current.addLatLng([n,i]),r.current.panTo([n,i]),await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e,latitude:n,longitude:i,timestamp:new Date().toISOString(),mode:"simulation"})})},2e3)},console.error,{enableHighAccuracy:!0})},className:"border border-green-400 px-4 py-2 hover:bg-green-500 hover:text-black transition",children:"START SIMULATION"}),(0,t.jsx)("button",{onClick:d,className:"border border-red-400 px-4 py-2 hover:bg-red-500 hover:text-black transition",children:"END TRIP"})]}),(0,t.jsxs)("div",{className:"text-sm",children:["STATUS:"," ",(0,t.jsx)("span",{className:"font-bold",children:"idle"===s?"IDLE":"recording"===s?"RECORDING":"SIMULATING"})]})]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{id:"map",className:"h-full w-full"})})]})}e.s(["default",()=>r])},71400,e=>{e.v(t=>Promise.all(["static/chunks/9c09817456a99b20.js"].map(t=>e.l(t))).then(()=>t(32322)))}]);