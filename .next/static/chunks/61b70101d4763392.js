(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36370,e=>{"use strict";var t=e.i(43476),o=e.i(71645);function n(){let[e,n]=(0,o.useState)("none"),i=(0,o.useRef)(null),a=(0,o.useRef)(null);function l(){null!==i.current&&(navigator.geolocation.clearWatch(i.current),i.current=null),a.current&&(clearInterval(a.current),a.current=null)}async function r(e,t){await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:"POC-001",latitude:e,longitude:t,timestamp:new Date().toISOString()})})}return(0,o.useEffect)(()=>("live"===e&&((l(),navigator.geolocation)?(localStorage.setItem("activeDevice","POC-001"),i.current=navigator.geolocation.watchPosition(async e=>{let t=e.coords.latitude,o=e.coords.longitude;console.log("LIVE GPS:",t,o),await r(t,o)},e=>{console.error("GPS ERROR:",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})):alert("Geolocation not supported")),"simulation"===e&&function(){if(l(),!navigator.geolocation)return alert("Geolocation not supported");let e="SIM-"+Date.now();localStorage.setItem("activeDevice",e),navigator.geolocation.getCurrentPosition(t=>{let o=t.coords.latitude,n=t.coords.longitude;console.log("Simulation starting from:",o,n);let i=2*Math.random()*Math.PI;a.current=setInterval(async()=>{i+=(Math.random()-.5)*.1;let t=5e-5+5e-5*Math.random();o+=t*Math.cos(i),n+=t*Math.sin(i),await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e,mode:"simulation",latitude:o,longitude:n,timestamp:new Date().toISOString()})})},2e3)},e=>{console.error("GPS error for simulation start:",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})}(),"none"===e&&l(),()=>l()),[e]),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-black text-green-400 gap-6",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["none"===e&&"Select Tracking Mode","live"===e&&"Live GPS Tracking ðŸ›°","simulation"===e&&"Simulation Mode ðŸš"]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>n("live"),className:"bg-blue-500 text-white px-6 py-2 rounded",children:"Live GPS"}),(0,t.jsx)("button",{onClick:()=>n("simulation"),className:"bg-green-500 text-black px-6 py-2 rounded",children:"Simulation"}),(0,t.jsx)("button",{onClick:()=>n("none"),className:"bg-red-500 text-white px-6 py-2 rounded",children:"Stop"})]})]})}e.s(["default",()=>n])}]);