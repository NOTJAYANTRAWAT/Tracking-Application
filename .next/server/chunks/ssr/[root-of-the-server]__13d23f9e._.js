module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let d=(0,c.useRef)(null),e=(0,c.useRef)(null),f=(0,c.useRef)(null),g=(0,c.useRef)(null),h=(0,c.useRef)(null),i=(0,c.useRef)(null),[j,k]=(0,c.useState)("idle");function l(){null!==g.current&&(navigator.geolocation.clearWatch(g.current),g.current=null),h.current&&(clearInterval(h.current),h.current=null),i.current=null,k("idle")}return(0,c.useEffect)(()=>{let b;return async function(){b=await a.A(67495),delete b.Icon.Default.prototype._getIconUrl,b.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),d.current=b.map("map").setView([28.6139,77.209],13),b.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(d.current),e.current=b.marker([28.6139,77.209]).addTo(d.current),f.current=b.polyline([],{color:"#00ff00",weight:3}).addTo(d.current),setTimeout(()=>{d.current.invalidateSize()},100)}(),()=>l()},[]),(0,b.jsxs)("div",{className:"flex flex-col h-screen bg-black text-green-400 font-mono",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-green-500/30 bg-green-500/5",children:[(0,b.jsx)("div",{className:"text-xl tracking-widest",children:"ðŸš FLIGHT CONTROL CONSOLE"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:function(){l();let a="LIVE-"+Date.now();i.current=a,f.current.setLatLngs([]),k("recording"),navigator.geolocation&&(g.current=navigator.geolocation.watchPosition(async b=>{let c=b.coords.latitude,g=b.coords.longitude;e.current.setLatLng([c,g]),f.current.addLatLng([c,g]),d.current.panTo([c,g]),await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:a,latitude:c,longitude:g,timestamp:new Date().toISOString(),mode:"live"})})},console.error,{enableHighAccuracy:!0}))},className:"border border-green-400 px-4 py-2 hover:bg-green-500 hover:text-black transition",children:"START RECORDING"}),(0,b.jsx)("button",{onClick:function(){l();let a="SIM-"+Date.now();i.current=a,f.current.setLatLngs([]),k("simulation"),navigator.geolocation.getCurrentPosition(b=>{let c=b.coords.latitude,g=b.coords.longitude,i=2*Math.random()*Math.PI;h.current=setInterval(async()=>{i+=(Math.random()-.5)*.1;let b=5e-5+5e-5*Math.random();c+=b*Math.cos(i),g+=b*Math.sin(i),e.current.setLatLng([c,g]),f.current.addLatLng([c,g]),d.current.panTo([c,g]),await fetch("/api/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:a,latitude:c,longitude:g,timestamp:new Date().toISOString(),mode:"simulation"})})},2e3)},console.error,{enableHighAccuracy:!0})},className:"border border-green-400 px-4 py-2 hover:bg-green-500 hover:text-black transition",children:"START SIMULATION"}),(0,b.jsx)("button",{onClick:l,className:"border border-red-400 px-4 py-2 hover:bg-red-500 hover:text-black transition",children:"END TRIP"})]}),(0,b.jsxs)("div",{className:"text-sm",children:["STATUS:"," ",(0,b.jsx)("span",{className:"font-bold",children:"idle"===j?"IDLE":"recording"===j?"RECORDING":"SIMULATING"})]})]}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("div",{id:"map",className:"h-full w-full"})})]})}a.s(["default",()=>d])},67495,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_leaflet_dist_leaflet-src_aa14ce50.js"].map(b=>a.l(b))).then(()=>b(99661)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__13d23f9e._.js.map