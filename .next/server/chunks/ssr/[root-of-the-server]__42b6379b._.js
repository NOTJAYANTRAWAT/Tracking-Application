module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},32978,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let d=(0,c.useRef)(null),e=(0,c.useRef)(null),f=(0,c.useRef)(null),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null);async function k(a){j(a),f.current.setLatLngs([]);let b=await fetch(`/api/location?device_id=${a}`),c=await b.json(),g=c.map(a=>[a.latitude,a.longitude]);for(let a of(d.current.fitBounds(g),c)){let b=[a.latitude,a.longitude];e.current.setLatLng(b),f.current.addLatLng(b),await new Promise(a=>setTimeout(a,120))}j(null)}return(0,c.useEffect)(()=>{let b;async function c(){let a=await fetch("/api/location"),b=await a.json(),c=[];for(let a of b){let b=await fetch(`/api/location?device_id=${a}`),d=await b.json();if(!d.length)continue;let e=d[0],f=d[d.length-1],g=new Date(e.timestamp),h=new Date(f.timestamp),i=g.toLocaleDateString(),j=g.toLocaleTimeString(),k=h.toLocaleTimeString(),l=Math.floor((h.getTime()-g.getTime())/1e3),m=l>60?`${Math.floor(l/60)}m ${l%60}s`:`${l}s`,n=function(a){let b=0;for(let c=1;c<a.length;c++)b+=function(a,b,c,d){let e=Math.sin((c-a)*Math.PI/180/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin((d-b)*Math.PI/180/2)**2;return 12742*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}(a[c-1].latitude,a[c-1].longitude,a[c].latitude,a[c].longitude);return b}(d);c.push({id:a,duration:m,start:{lat:e.latitude,lng:e.longitude},end:{lat:f.latitude,lng:f.longitude},distance:`${n.toFixed(2)} km`,startTime:j,endTime:k,date:i})}h(c)}return async function(){b=await a.A(67495),delete b.Icon.Default.prototype._getIconUrl,b.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),d.current=b.map("map",{zoomControl:!1}).setView([28.6139,77.209],13),b.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:""}).addTo(d.current),e.current=b.marker([28.6139,77.209]).addTo(d.current),f.current=b.polyline([],{color:"#00ff00",weight:3}).addTo(d.current),c()}(),()=>{d.current&&d.current.remove()}},[]),(0,b.jsxs)("div",{className:"flex h-screen bg-black text-green-400 font-mono",children:[(0,b.jsxs)("div",{className:"w-96 p-6 overflow-y-auto border-r border-green-500/20",children:[(0,b.jsx)("h2",{className:"text-2xl mb-6 tracking-widest",children:"✈ FLIGHT LOG"}),g.map(a=>(0,b.jsxs)("div",{className:"mb-6 p-4 border border-green-500/30   bg-green-500/5   hover:bg-green-500/10   transition",children:[(0,b.jsx)("div",{className:"text-xs opacity-70 mb-2",children:a.id}),(0,b.jsxs)("div",{className:"text-sm opacity-70",children:["DATE: ",a.date]}),(0,b.jsxs)("div",{className:"text-sm opacity-70",children:["TIME: ",a.startTime," → ",a.endTime]}),(0,b.jsxs)("div",{className:"text-sm",children:["DURATION: ",a.duration]}),(0,b.jsxs)("div",{className:"text-sm",children:["DISTANCE: ",a.distance]}),(0,b.jsxs)("div",{className:"text-sm",children:["START: ",a.start.lat.toFixed(3),", ",a.start.lng.toFixed(3)]}),(0,b.jsxs)("div",{className:"text-sm",children:["END: ",a.end.lat.toFixed(3),", ",a.end.lng.toFixed(3)]}),(0,b.jsxs)("div",{className:"text-sm",children:["DURATION: ",a.duration]}),(0,b.jsxs)("div",{className:"text-sm",children:["DISTANCE: ",a.distance]}),(0,b.jsxs)("div",{className:"text-sm",children:["START: ",a.start.lat.toFixed(3),", ",a.start.lng.toFixed(3)]}),(0,b.jsxs)("div",{className:"text-sm",children:["END: ",a.end.lat.toFixed(3),", ",a.end.lng.toFixed(3)]}),(0,b.jsx)("button",{onClick:()=>k(a.id),className:"mt-4 w-full border border-green-400   hover:bg-green-500 hover:text-black   py-2 transition",children:"▶ REPLAY"}),i===a.id&&(0,b.jsx)("div",{className:"mt-2 text-xs animate-pulse",children:"REPLAYING..."})]},a.id))]}),(0,b.jsx)("div",{id:"map",className:"flex-1"})]})}a.s(["default",()=>d])},67495,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_leaflet_dist_leaflet-src_aa14ce50.js"].map(b=>a.l(b))).then(()=>b(99661)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42b6379b._.js.map